{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 10, "column": 0}, "map": {"version":3,"sources":["file:///Users/arslanshipulin/Downloads/designswipe-merged/lib/supabase.ts"],"sourcesContent":["import { createClient } from \"@supabase/supabase-js\";\n\nexport const supabase = createClient(\n  process.env.NEXT_PUBLIC_SUPABASE_URL!,\n  process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY!,\n  {\n    auth: {\n      persistSession: true,\n      autoRefreshToken: true,\n      storageKey: \"ds_supabase\",\n    },\n  }\n);\n"],"names":[],"mappings":";;;;AAAA;;AAEO,MAAM,WAAW,IAAA,uMAAY,sUAGlC;IACE,MAAM;QACJ,gBAAgB;QAChB,kBAAkB;QAClB,YAAY;IACd;AACF","debugId":null}},
    {"offset": {"line": 27, "column": 0}, "map": {"version":3,"sources":["file:///Users/arslanshipulin/Downloads/designswipe-merged/app/context/AppContext.tsx"],"sourcesContent":["\"use client\";\nimport { createContext, useContext, useEffect, useState, ReactNode } from \"react\";\nimport { supabase } from \"@/lib/supabase\";\n\nexport interface Design {\n  id: string;\n  image: string;\n  roomType: string;\n  style: string[];\n}\n\nexport interface FilterState {\n  styles: string[];\n  roomTypes: string[];\n  colors: string[];\n  materials: string[];\n  propertyType: string[];\n  budget: string | null;\n}\n\ninterface AppContextType {\n  user: { id: string; email?: string | null } | null;\n\n  filters: FilterState;\n  setFilters: (patch: Partial<FilterState>) => void;\n  resetFilters: () => void;\n\n  favorites: Design[];\n  addFavorite: (d: Design) => Promise<void>;\n  removeFavorite: (id: string) => Promise<void>;\n  clearFavorites: () => Promise<void>;\n}\n\nconst DEFAULT_FILTERS: FilterState = {\n  styles: [],\n  roomTypes: [],\n  colors: [],\n  materials: [],\n  propertyType: [],\n  budget: null,\n};\n\nconst LOCAL_KEY = \"ds_favorites\";\nconst AppContext = createContext<AppContextType | undefined>(undefined);\n\nexport function AppProvider({ children }: { children: ReactNode }) {\n  const [user, setUser] = useState<AppContextType[\"user\"]>(null);\n  const [filters, setFiltersState] = useState<FilterState>(DEFAULT_FILTERS);\n  const [favorites, setFavorites] = useState<Design[]>([]);\n\n  // --- AUTH: гидрация сессии и подписка на изменения\n  useEffect(() => {\n    (async () => {\n      const { data: { session } } = await supabase.auth.getSession();\n      if (session?.user) {\n        setUser({ id: session.user.id, email: session.user.email });\n      }\n    })();\n    const { data: sub } = supabase.auth.onAuthStateChange((_evt, sess) => {\n      if (sess?.user) setUser({ id: sess.user.id, email: sess.user.email });\n      else setUser(null);\n    });\n    return () => { sub.subscription.unsubscribe(); };\n  }, []);\n\n  // --- FAVORITES: загрузка\n  useEffect(() => {\n    (async () => {\n      if (user) {\n        // загружаем с сервера\n        const { data, error } = await supabase\n          .from(\"favorites\")\n          .select(\"design_id, image, room_type, styles\")\n          .order(\"created_at\", { ascending: false });\n        if (!error && data) {\n          setFavorites(\n            data.map((r) => ({\n              id: r.design_id,\n              image: r.image,\n              roomType: r.room_type ?? \"Unknown\",\n              style: Array.isArray(r.styles) ? r.styles : [],\n            }))\n          );\n          // объединяем локальные лайки с сервером (one-time merge)\n          try {\n            const localRaw = localStorage.getItem(LOCAL_KEY);\n            if (localRaw) {\n              const local: Design[] = JSON.parse(localRaw);\n              const toUpload = local.filter(L => !data.find(D => D.design_id === L.id));\n              if (toUpload.length) {\n                await supabase.from(\"favorites\").insert(\n                  toUpload.map((d) => ({\n                    design_id: d.id,\n                    image: d.image,\n                    room_type: d.roomType,\n                    styles: d.style,\n                  }))\n                );\n                localStorage.removeItem(LOCAL_KEY);\n              }\n            }\n          } catch {}\n        }\n      } else {\n        // гость → localStorage\n        try {\n          const raw = localStorage.getItem(LOCAL_KEY);\n          setFavorites(raw ? JSON.parse(raw) : []);\n        } catch { setFavorites([]); }\n      }\n    })();\n  }, [user]);\n\n  // --- HELPERS\n  const setFilters = (patch: Partial<FilterState>) =>\n    setFiltersState((prev) => ({ ...prev, ...patch }));\n  const resetFilters = () => setFiltersState(DEFAULT_FILTERS);\n\n  const persistLocal = (next: Design[]) => {\n    try { localStorage.setItem(LOCAL_KEY, JSON.stringify(next)); } catch {}\n  };\n\n  const addFavorite = async (d: Design) => {\n    setFavorites((prev) => {\n      if (prev.some((x) => x.id === d.id)) return prev;\n      const next = [d, ...prev];\n      if (!user) persistLocal(next);\n      return next;\n    });\n    if (user) {\n      await supabase.from(\"favorites\").insert({\n        design_id: d.id, image: d.image, room_type: d.roomType, styles: d.style,\n      });\n    }\n  };\n\n  const removeFavorite = async (id: string) => {\n    setFavorites((prev) => {\n      const next = prev.filter((x) => x.id !== id);\n      if (!user) persistLocal(next);\n      return next;\n    });\n    if (user) {\n      await supabase.from(\"favorites\").delete().eq(\"design_id\", id);\n    }\n  };\n\n  const clearFavorites = async () => {\n    setFavorites([]);\n    if (!user) persistLocal([]);\n    if (user) {\n      await supabase.from(\"favorites\").delete().neq(\"design_id\", \"___never___\");\n    }\n  };\n\n  return (\n    <AppContext.Provider value={{\n      user,\n      filters, setFilters, resetFilters,\n      favorites, addFavorite, removeFavorite, clearFavorites\n    }}>\n      {children}\n    </AppContext.Provider>\n  );\n}\n\nexport const useApp = () => {\n  const ctx = useContext(AppContext);\n  if (!ctx) throw new Error(\"useApp must be used inside AppProvider\");\n  return ctx;\n};\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 214, "column": 0}, "map": {"version":3,"sources":["file:///Users/arslanshipulin/Downloads/designswipe-merged/components/ui/BottomNav.tsx"],"sourcesContent":["\"use client\";\nimport { Home, SlidersHorizontal, User } from \"lucide-react\";\nimport Link from \"next/link\";\nimport { usePathname } from \"next/navigation\";\nimport { motion } from \"framer-motion\";\n\nexport default function BottomNav() {\n  const pathname = usePathname();\n\n  const navItems = [\n    { label: \"Home\", icon: Home, href: \"/\" },\n    { label: \"Filters\", icon: SlidersHorizontal, href: \"/filters\" },\n    { label: \"Profile\", icon: User, href: \"/profile\" },\n  ];\n\n  return (\n    <motion.nav\n      initial={{ y: 50, opacity: 0 }}\n      animate={{ y: 0, opacity: 1 }}\n      className=\"fixed bottom-6 left-1/2 -translate-x-1/2 bg-[#0B0F24]/80 backdrop-blur-md border border-white/10 rounded-[30px] px-6 py-3 flex gap-8 shadow-[0_8px_40px_rgba(0,0,0,0.5)] z-50\"\n    >\n      {navItems.map(({ label, icon: Icon, href }) => {\n        const isActive = pathname === href;\n        return (\n          <Link\n            key={label}\n            href={href}\n            className={`flex flex-col items-center text-sm transition-all ${\n              isActive ? \"text-[#00D9FF]\" : \"text-gray-400 hover:text-white\"\n            }`}\n          >\n            <Icon\n              className={`w-6 h-6 mb-1 ${\n                isActive ? \"fill-[#00D9FF]\" : \"fill-none\"\n              }`}\n            />\n            <span>{label}</span>\n          </Link>\n        );\n      })}\n    </motion.nav>\n  );\n}\n"],"names":[],"mappings":";;;;;AACA;AAAA;AAAA;AACA;AACA;AACA;AAJA;;;;;;AAMe,SAAS;IACtB,MAAM,WAAW,IAAA,iJAAW;IAE5B,MAAM,WAAW;QACf;YAAE,OAAO;YAAQ,MAAM,2MAAI;YAAE,MAAM;QAAI;QACvC;YAAE,OAAO;YAAW,MAAM,qPAAiB;YAAE,MAAM;QAAW;QAC9D;YAAE,OAAO;YAAW,MAAM,0MAAI;YAAE,MAAM;QAAW;KAClD;IAED,qBACE,8OAAC,oMAAM,CAAC,GAAG;QACT,SAAS;YAAE,GAAG;YAAI,SAAS;QAAE;QAC7B,SAAS;YAAE,GAAG;YAAG,SAAS;QAAE;QAC5B,WAAU;kBAET,SAAS,GAAG,CAAC,CAAC,EAAE,KAAK,EAAE,MAAM,IAAI,EAAE,IAAI,EAAE;YACxC,MAAM,WAAW,aAAa;YAC9B,qBACE,8OAAC,uKAAI;gBAEH,MAAM;gBACN,WAAW,CAAC,kDAAkD,EAC5D,WAAW,mBAAmB,kCAC9B;;kCAEF,8OAAC;wBACC,WAAW,CAAC,aAAa,EACvB,WAAW,mBAAmB,aAC9B;;;;;;kCAEJ,8OAAC;kCAAM;;;;;;;eAXF;;;;;QAcX;;;;;;AAGN","debugId":null}},
    {"offset": {"line": 297, "column": 0}, "map": {"version":3,"sources":["file:///Users/arslanshipulin/Downloads/designswipe-merged/app/layout.tsx"],"sourcesContent":["\"use client\";\n\nimport type { ReactNode } from \"react\";\nimport \"./globals.css\";\nimport { AppProvider } from \"@/app/context/AppContext\";\nimport BottomNav from \"@/components/ui/BottomNav\";\n\nexport default function RootLayout({ children }: { children: ReactNode }) {\n  return (\n    <html lang=\"en\">\n      <body className=\"bg-[#0A0F2C] text-white\">\n        <AppProvider>\n          {children}\n          <BottomNav />\n        </AppProvider>\n      </body>\n    </html>\n  );\n}\n\n"],"names":[],"mappings":";;;;;AAIA;AACA;AALA;;;;;AAOe,SAAS,WAAW,EAAE,QAAQ,EAA2B;IACtE,qBACE,8OAAC;QAAK,MAAK;kBACT,cAAA,8OAAC;YAAK,WAAU;sBACd,cAAA,8OAAC,4IAAW;;oBACT;kCACD,8OAAC,yIAAS;;;;;;;;;;;;;;;;;;;;;AAKpB","debugId":null}}]
}